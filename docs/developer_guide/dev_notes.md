# 개발팀 내부 기록 (Development Notes)

이 문서는 개발팀 내부의 기술적 논의, 디버깅 과정, 실험 결과, 코드 리뷰 요약, 임시 결정사항 등을 자유롭게 기록하는 공간입니다.

## 목적
- 개발팀 내부의 자유로운 기술 토론 및 히스토리 관리
- 추후 문제 발생 시 원인 추적 및 회고에 용이
- 신규 개발자 온보딩 시 실질적인 개발 맥락 파악에 도움

## 관리 방식
- 개발팀 구성원 누구나 자유롭게 내용을 추가할 수 있습니다.
- 특정 논의나 결정이 공식화되거나 중요한 프로젝트 히스토리로 남겨야 할 경우, `docs/conversation_log.md` 파일로 내용을 요약하여 이관합니다.
- 날짜별 또는 주제별로 섹션을 나누어 기록하는 것을 권장합니다.

---

## 2025년 7월 3일

### QuickTagsWidget 비활성화 문제 논의
- `setEnabled(False)`가 예상대로 동작하지 않는 원인 분석 필요.
- 시그널 연결 및 위젯 계층 구조 재검토.
- `TagUIStateManager` 도입 전, 단기적으로 디버깅 로그를 통해 실제 UI 상태 추적 예정.

## 2025년 7월 4일

### 최초 로드시 태그 관련 UI 비활성화 개선
- 문제: 애플리케이션 최초 로드시 파일이 선택되지 않았음에도 자주 사용하는 태그(QuickTagsWidget) 버튼이 활성화되어 있었음.
- 원인: state_manager.set_file_selected(False)가 초기화 시점에 호출되지 않아, 위젯이 기본적으로 활성화(True) 상태로 남아 있었음.
- 조치: MainWindow 초기화 시 모든 위젯 등록 후 state_manager.set_file_selected(False)를 호출하여, 최초 로드시 태그 관련 UI가 비활성화된 상태로 시작하도록 개선.
- 기대 효과: 파일이 선택되기 전까지 태그 입력/버튼 등 모든 태그 관련 UI가 비활성화되어 UX 혼란 방지 및 정책 일관성 확보.

## 2025년 7월 3일

### 디렉토리별 일괄 태그 추가 기능 개발 시작
- DRS-20250704-001_Batch_Tagging_Feature.md 명세에 따른 개발 시작
- 통합 패널 방식의 UI/UX 설계 채택
- BatchTaggingPanel 위젯 구현 예정
- 백그라운드 처리 및 파일 미리보기 기능 포함

### 일괄 태그 기능 1차 구현 완료
- TagManager에 add_tags_to_directory 메서드 구현
  - 벌크 업데이트를 통한 성능 최적화
  - 재귀 옵션 및 파일 확장자 필터링 지원
  - 중복 태그 제거 로직 포함
- BatchTaggingPanel 위젯 구현
  - 디렉토리 선택 및 파일 미리보기 기능
  - 실시간 필터링 옵션 (재귀, 확장자)
  - 백그라운드 워커 스레드로 UI 블로킹 방지
  - 진행률 표시 및 취소 기능
- MainWindow에 일괄 태그 메뉴 및 패널 통합
  - File 메뉴에 "일괄 태그 추가" 항목 추가
  - 현재 선택된 디렉토리로 패널 자동 설정
- 다음 단계: UI 레이아웃 개선 및 테스트

### 일괄 태그 기능 1차 커밋 완료 (2025-07-03)
- 커밋 해시: fb544b2
- 구현된 기능:
  - TagManager.add_tags_to_directory: 벌크 업데이트 기반 일괄 태그 추가
  - BatchTaggingPanel: 전용 UI 패널 (파일 미리보기, 필터링, 백그라운드 처리)
  - MainWindow 통합: 별도 공간에 패널 배치, 메뉴 연동
- 남은 개선사항:
  - UI/UX 세부 조정 (크기, 색상, 레이아웃)
  - 에러 처리 강화
  - 사용자 피드백 개선
  - 테스트 케이스 작성

## 2025년 7월 5일

### 일괄 태그 기능 개선사항 완료
- **UI/UX 세부 조정 완료**:
  - BatchTaggingPanel 전체적인 디자인 개선
  - 모던한 스타일시트 적용 (색상, 폰트, 간격, 아이콘)
  - 상태 표시 라벨 추가 (대기 중, 진행 중, 완료, 오류)
  - 파일 수 표시 및 실시간 업데이트
  - 버튼 스타일 개선 (호버 효과, 비활성화 상태)
  - 테이블 스타일 개선 (교대 행 색상, 헤더 스타일)
  - 진행률 바 스타일 개선

- **에러 처리 강화 완료**:
  - TagManager에 상세한 로깅 시스템 도입
  - 커스텀 예외 클래스 (TagManagerError) 추가
  - 연결 재시도 메커니즘 구현 (최대 3회)
  - 태그 유효성 검사 로직 추가
  - 상세한 오류 메시지 및 해결 방법 제시
  - 벌크 업데이트 시 개별 파일 오류 추적
  - 연결 상태 확인 메서드 추가

- **사용자 피드백 개선 완료**:
  - 상세한 처리 결과 표시 (성공/실패/수정/생성 파일 수)
  - 실패한 파일 목록 표시 (최대 5개)
  - 오류 발생 시 해결 방법 안내
  - 성공/실패에 따른 다른 아이콘 사용
  - 실시간 상태 업데이트

- **다음 단계**:
  - QA팀에 테스트 요청 (테스트 케이스 설계 및 실행)
  - 사용자 피드백 수집 및 추가 개선
  - 성능 최적화 검토

### File Information 표시 문제 발견
- **문제**: 일부 파일에서 File Information이 표시되지 않는 현상 발생
- **원인 분석**: 
  - File Information은 DB 메타 정보가 아닌 실시간 파일 시스템 정보 (os.stat 사용)
  - 파일 접근 권한, 파일 존재 여부, 경로 문제 등으로 인해 TaggedFile 생성 시 FileNotFoundError 발생
  - 현재는 예외만 출력하고 UI에는 아무것도 표시하지 않음
- **영향**: 사용자 경험 저하 (파일 정보가 보이지 않아 혼란)
- **해결 방안**: 
  - 파일 접근 오류 시 사용자에게 명확한 메시지 표시
  - 파일 정보를 가져올 수 없는 경우에도 기본 정보 표시
  - 권한 문제나 파일 시스템 문제에 대한 상세한 오류 처리
- **처리 계획**: QA팀 테스트 완료 후 발견된 이슈들과 함께 docs/issues.md에 등록하여 처리
