# 개발 이슈 (Development Issues)

## [이슈] 검색 기능 파일 경로 정규화 및 MongoDB 부분일치 검색 문제 (2025-01-15)

- **이슈 유형**: 버그/아키텍처
- **제출 팀**: 개발팀
- **제목**: 검색 기능에서 파일 경로 정규화 불일치 및 MongoDB 부분일치 검색 성능 문제
- **설명**:
    - **문제/요청 내용**: 
        1. **파일 경로 정규화 불일치**: 기본 검색은 정상 동작하지만 고급 검색(부분일치)에서 파일 경로 정규화 문제로 태그 조회가 실패함
        2. **MongoDB 부분일치 검색 비효율성**: 현재 구현은 모든 태그를 가져와서 메모리에서 부분일치 필터링을 수행하는 방식으로, 대용량 데이터에서 성능 문제 발생 가능
        3. **검색 조건 형식 불일치**: UI에서 전달하는 검색 조건 형식과 SearchManager에서 기대하는 형식 간의 불일치
    - **재현 단계**:
        1. 기본 검색에서 "강아지" 입력 → 정상 검색 결과
        2. 고급 검색에서 "강" 입력 → 검색 결과 없음
        3. 디버그 로그에서 경로 형식 차이 확인:
           - 기본 검색: `G:/내 드라이브/obsidian/cloud/154222-807166890_tiny.mp4` (슬래시) → 태그 조회 성공
           - 고급 검색: `G:\내 드라이브\obsidian\cloud\154222-807166890_tiny.mp4` (역슬래시) → 태그 조회 실패
    - **현재 동작**: 
        - 기본 검색: TagManager를 통해 정상 동작
        - 고급 검색: 경로 정규화 문제로 태그 조회 실패
        - MongoDB 부분일치: 모든 태그를 메모리로 가져와서 필터링
    - **기대 동작**: 
        - 모든 검색에서 일관된 경로 형식 사용
        - MongoDB의 텍스트 인덱스나 정규식 쿼리를 활용한 효율적인 부분일치 검색
        - 검색 조건 형식의 일관성 확보
    - **영향**: 
        - 고급 검색 기능 사용 불가
        - 대용량 데이터에서 성능 저하
        - 사용자 경험 저하
    - **관련 파일/모듈**:
        - `core/search_manager.py`
        - `core/adapters/tag_manager_adapter.py`
        - `core/repositories/tag_repository.py`
        - `widgets/search_widget.py`
        - `viewmodels/search_viewmodel.py`
    - **기술적 문제점**:
        1. **파일 저장 시 경로 정규화**: Windows에서 파일 경로가 역슬래시로 저장되지만 DB에는 슬래시로 저장되는 불일치
        2. **MongoDB 부분일치 검색**: RDB와 달리 MongoDB는 텍스트 인덱스나 정규식 쿼리를 활용해야 효율적
        3. **검색 아키텍처**: 현재 구현이 파일시스템 순회와 DB 조회를 혼재하여 사용하는 복잡한 구조

- **해결 상태**: [진행 중]
- **담당자**: 개발팀
- **우선순위**: Critical
- **예상 완료일**: 2025년 1월 16일

## [이슈] UI 위젯 래핑으로 인한 AttributeError 반복 발생 및 아키텍처 개선 필요 (2025-07-15)

- **이슈 유형**: 아키텍처/버그
- **제출 팀**: 개발팀
- **제목**: UI 위젯 래핑으로 인한 AttributeError 반복 발생 및 아키텍처 개선 필요
- **설명**:
    - **문제/요청 내용**: DRS-20250715-001 (UI 디자인 개선) 작업 중 `UISetupManager`에서 위젯을 `QFrame`으로 래핑하면서 `MainWindow` 및 `SignalConnectionManager`에서 해당 위젯의 속성(메서드, 시그널)에 접근할 때 `AttributeError`가 반복적으로 발생하고 있음.
    - **재현 단계**: 애플리케이션 실행 시 `AttributeError` 발생. (예: `'QFrame' object has no attribute 'batch_remove_tags_requested'`)
    - **현재 동작**: `widget.layout().itemAt(0).widget()`과 같이 래핑된 위젯의 실제 위젯에 접근하는 방식으로 임시 해결 중.
    - **기대 동작**: 위젯 래핑 방식과 기존 코드의 위젯 접근 방식 간의 아키텍처 불일치를 해소하여 `AttributeError` 발생을 방지하고 코드의 가독성 및 유지보수성을 향상시켜야 함.
    - **영향**: 개발 생산성 저하, 코드 복잡성 증가, 잠재적 버그 발생 가능성.
    - **관련 파일/모듈**:
        - `core/ui/ui_setup_manager.py`
        - `main_window.py`
        - `core/ui/signal_connection_manager.py`
    - **제안**:
        1.  `UISetupManager`에서 래핑된 `QFrame`과 실제 위젯 인스턴스를 `MainWindow`에 별도의 속성으로 저장하는 방안 (`self.main_window.widget_name_frame`, `self.main_window.widget_name_actual`).
        2.  또는, `UISetupManager`가 위젯을 래핑한 후, 래핑된 위젯의 실제 위젯을 반환하는 헬퍼 메서드를 제공하여 일관된 접근 방식을 강제하는 방안.
        3.  이러한 아키텍처 변경에 대한 PM의 의견 및 가이드라인 필요.

- **해결 상태**: [해결 완료]
- **해결 내용**: `UISetupManager`의 `_create_widgets` 메서드에서 위젯을 생성하고 래핑한 후, `self.widgets` 딕셔너리에는 실제 위젯 인스턴스를 저장하도록 변경. `MainWindow` 및 `SignalConnectionManager`는 `self.ui_setup_manager.get_widget('widget_name')`을 통해 실제 위젯에 접근하도록 수정. 이 방식은 캡슐화 강화, 단일 책임 원칙 준수, 일관된 위젯 접근 방식 제공, 유연성 및 확장성 증대 등 아키텍처에 긍정적인 영향을 미침.
- **담당자**: 개발팀
- **우선순위**: Critical

## [이슈] 일괄태깅 기능 공통 태그 표시 개선 완료 (2025-07-13)

- **이슈 유형**: 기능 개선
- **제출 팀**: 개발팀
- **제목**: 여러 파일 선택 시 일괄태깅 탭에 공통 태그 표시 기능 추가
- **설명**:
    - **문제/요청 내용**: 여러 파일을 선택하여 일괄태깅을 할 때, 기존 파일들이 가지고 있던 태그가 일괄태깅 탭에 표시되지 않아서 사용자가 새로 부여된 태그들이 기존 파일들의 태그를 모두 없애고 저장되는 것으로 오해할 수 있었습니다. 실제로는 `add_tags_to_files()` 메서드가 기존 태그에 추가하는 방식이지만, UI에서 명확하지 않았습니다.
    - **재현 단계 (개선 전)**:
        1. 태그가 있는 여러 파일을 선택합니다.
        2. 일괄태깅 탭이 활성화되지만 기존 태그가 표시되지 않습니다.
        3. 사용자가 새 태그만 입력하고 적용하면 기존 태그가 사라질 것으로 오해할 수 있습니다.
    - **현재 동작**: 선택된 파일들의 공통 태그가 일괄태깅 탭에 표시되어 사용자가 기존 태그를 확인할 수 있습니다.
    - **기대 동작**: 다중 파일 선택 시 모든 파일에 공통으로 있는 태그들이 일괄태깅 탭에 표시되어 사용자가 기존 태그를 확인하고 추가/제거할 수 있어야 합니다.
    - **영향**: 사용자 경험 개선, 태그 관리 기능의 명확성 향상.
    - **관련 파일/모듈**:
        - `widgets/tag_control_widget.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: 
    - `_get_common_tags_for_files()` 메서드 구현으로 선택된 파일들의 교집합 태그 계산
    - 일괄태깅 탭의 대상 라벨에 공통 태그 개수 표시 ("선택된 파일: 3개 (공통 태그: 2개)")
    - 공통 태그가 없는 경우 "공통 태그 없음" 표시
- **해결 일자**: 2025년 1월 13일
- **담당자**: 개발팀
- **우선순위**: 높음

---

## [이슈] 태그 저장 후 UI 동기화 지연 (2025-07-07)

- **이슈 유형**: 버그/UX 개선
- **제출 팀**: 개발팀
- **제목**: 태그 저장/적용 후 파일 상세 정보 및 파일 목록의 태그 정보가 즉시 갱신되지 않음
- **설명**:
    - **문제/요청 내용**: `TagControlWidget`에서 태그를 저장하거나 일괄 적용한 후, 변경된 내용이 `FileDetailWidget`의 태그 칩이나 `FileListWidget`의 태그 컬럼에 실시간으로 반영되지 않는다. 사용자는 변경 사항을 확인하기 위해 다른 디렉토리를 클릭했다가 다시 돌아와야 하는 불편함이 있다.
    - **재현 단계**:
        1. 파일 목록에서 파일을 선택한다.
        2. `TagControlWidget`에서 태그를 추가 또는 삭제하고 '저장' 또는 '적용' 버튼을 누른다.
        3. `FileDetailWidget`과 `FileListWidget`에 보이는 태그 정보가 이전 상태 그대로 유지된다.
    - **현재 동작**: 태그 데이터는 DB에 정상적으로 저장되지만, UI 컴포넌트들이 변경 사실을 인지하지 못해 화면이 갱신되지 않는다.
    - **기대 동작**: 태그 저장이 완료되면, 관련된 모든 UI 컴포넌트(파일 상세 정보, 파일 목록)의 태그 정보가 즉시 새로고침되어야 한다.
    - **영향**: 사용자 경험(UX) 저하, 데이터 일관성에 대한 혼란 유발.
    - **관련 파일/모듈**:
        - `widgets/tag_control_widget.py`
        - `widgets/file_detail_widget.py`
        - `widgets/file_list_widget.py`
        - `main_window.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: `TagControlWidget`의 `tags_updated` 시그널과 `FileDetailWidget`의 `file_tags_changed` 시그널을 `MainWindow`의 `on_tags_updated` 슬롯에 연결하여 UI가 일관성 있게 업데이트되도록 수정.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀
- **우선순위**: 높음

---

## [이슈] 불필요한 `BatchTaggingPanel` 컴포넌트 및 관련 코드 정리 (2025-07-07)

- **이슈 유형**: 리팩토링/코드 정리
- **제출 팀**: 개발팀
- **제목**: `TagControlWidget`으로 기능이 일원화됨에 따라 불필요해진 `BatchTaggingPanel` 및 관련 코드 제거
- **설명**:
    - **문제/요청 내용**: 현재 아키텍처는 디렉토리/다중 파일 선택 시 `TagControlWidget`의 "일괄 태깅" 탭이 자동으로 활성화되어 모든 태깅 시나리오를 처리한다. 따라서 독립적인 `BatchTaggingPanel` 위젯과 이를 호출하려던 `MainWindow`의 메뉴 액션은 더 이상 필요하지 않은 중복 코드이다.
    - **현재 상태**: `widgets/batch_tagging_panel.py` 파일이 존재하며, `main_window.py`에 `actionBatchTagging` 메뉴와 `open_batch_tagging_dialog` 메서드가 구현되어 있으나 실제로는 사용되지 않는다.
    - **기대 동작**: 현재 아키텍처와 일치하도록 사용되지 않는 `BatchTaggingPanel` 관련 코드를 모두 제거하여 코드베이스를 정리하고 혼동을 방지한다.
    - **영향**: 코드 가독성 및 유지보수성 향상.
    - **관련 파일/모듈**:
        - `widgets/batch_tagging_panel.py`
        - `main_window.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: `widgets/batch_tagging_panel.py` 파일 및 `main_window.py`의 관련 메서드(`actionBatchTagging`, `open_batch_tagging_dialog`)가 존재하지 않음을 확인.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀
- **우선순위**: 보통

---

## [이슈] 파일 미선택 상태에서 태그 입력 및 등록 UI 동작 정책 논의 (2024-06-13)

- **이슈 유형**: 질문/기능 개선 논의
- **제출 팀**: 기획팀
- **제목**: 파일 미선택 상태에서 태그 입력 및 등록 UI 동작 정책 논의
- **설명**:
    - **문제/요청 내용**: 현재 TagInputWidget(태그 입력 UI)은 파일이 선택되지 않은 상태에서도 태그 칩을 추가할 수 있습니다. 하지만 이 상태에서 태그를 등록해도 실제로는 어떤 파일에도 태그가 저장되지 않습니다. 사용자는 태그가 등록된 것처럼 보이지만, 실제로는 데이터에 반영되지 않아 혼란을 줄 수 있습니다.
    - **재현 단계 (버그의 경우)**:
        1. 파일을 선택하지 않은 상태에서 태그 입력 필드에 태그를 입력하고 Enter를 누른다.
        2. 태그 칩이 UI에 추가된다.
        3. [태그 저장] 버튼을 눌러도 DB에는 반영되지 않는다.
    - **현재 동작**:
        - 파일 미선택 상태에서도 태그 칩 추가 및 입력 가능
        - 저장 시 실제로는 아무 파일에도 태그가 저장되지 않음
    - **기대 동작**: 파일이 선택되지 않은 상태에서는 태그 입력/등록이 불가능하거나, 또는 명확한 안내 메시지(예: "파일을 먼저 선택하세요")가 제공되어야 함
    - **영향**:
        - 사용자 혼란 유발
        - 태그 관리 기능의 신뢰성 저하
    - **관련 파일/모듈**:
        - main_window.py
        - widgets/tag_input_widget.py
    - **스크린샷/로그 (선택 사항)**: (필요시 첨부)

- **해결 상태**: [해결 완료]
- **해결 내용**: 파일 미선택 시 태그 입력 필드를 비활성화하여 사용자의 혼란을 방지하고, 태그 관리의 명확성을 높이기로 결정.
- **해결 일자**: 2025년 7월 3일
- **관련 커밋**: (개발자가 커밋 후 추가 예정)

## [이슈] 파일 미선택 시 자주 사용하는 태그(QuickTagsWidget) 버튼 비활성화 동작 미흡 (2024-07-03)

- **이슈 유형**: 버그/기획 논의
- **제출 팀**: 개발팀
- **제목**: 파일 미선택 시 자주 사용하는 태그(QuickTagsWidget) 버튼이 비활성화되지 않고 클릭 동작이 발생함
- **설명**:
    - **문제/요청 내용**: 파일이 선택되지 않은 상태에서도 QuickTagsWidget(자주 사용하는 태그) 버튼이 활성화되어 클릭 시 태그가 TagInputWidget에 추가/제거된다. 기획 의도상 파일이 선택되지 않은 경우에는 해당 버튼들이 비활성화되어야 하며, 클릭해도 아무 동작이 없어야 한다.
    - **재현 단계 (버그의 경우)**:
        1. 애플리케이션 실행
        2. 파일을 선택하지 않은 상태에서 자주 사용하는 태그 버튼을 클릭
        3. 태그가 TagInputWidget에 추가/제거됨
    - **현재 동작**: 파일 미선택 상태에서도 자주 사용하는 태그 버튼이 클릭 가능하며, 태그가 추가/제거된다.
    - **기대 동작**: 파일이 선택되지 않은 경우 QuickTagsWidget 전체가 비활성화되어 버튼 클릭이 불가능해야 한다.
    - **영향**: 사용자가 파일을 선택하지 않은 상태에서 태그를 잘못 추가/제거할 수 있어 UX 혼란 및 데이터 불일치 가능성이 있다.
    - **관련 파일/모듈**:
        - widgets/quick_tags_widget.py
        - main_window.py
    - **스크린샷/로그 (선택 사항)**: (생략)

- **해결 상태**: [해결 완료]
- **해결 내용**: MainWindow 초기화 시 모든 태그 관련 위젯 등록 후 TagUIStateManager의 set_file_selected(False)를 호출하여, 최초 로드시 태그 관련 UI가 비활성화된 상태로 시작하도록 개선. 파일이 선택되기 전까지 태그 입력/버튼 등 모든 태그 관련 UI가 비활성화되어 정책 일관성 및 UX 신뢰성 확보. `feat/tag-autocomplete` 브랜치가 `main`에 성공적으로 머지됨.
- **해결 일자**: 2025년 7월 4일
- **관련 커밋**: (머지된 커밋 해시 추가 예정)

## [이슈] 일괄 태그 추가 기능 QA 테스트 요청 (2025-07-05)

- **이슈 유형**: QA 테스트 요청
- **제출 팀**: 개발팀
- **제목**: 일괄 태그 추가 기능에 대한 종합 테스트 수행 요청
- **설명**:
    - **문제/요청 내용**: 7월 3일에 구현된 일괄 태그 추가 기능의 개선사항(UI/UX 개선, 에러 처리 강화, 사용자 피드백 개선)이 완료되었습니다. QA팀에서 해당 기능에 대한 종합적인 테스트를 수행하여 기능의 안정성과 사용성을 검증해주시기 바랍니다.
    - **테스트 대상 기능**:
        1. **기본 기능**: 디렉토리 선택, 파일 미리보기, 태그 입력, 일괄 적용
        2. **필터링 기능**: 재귀 옵션, 파일 확장자 필터링 (이미지/문서/사용자 정의)
        3. **UI/UX**: 스타일링, 상태 표시, 진행률 표시, 반응성
        4. **에러 처리**: 잘못된 입력, 네트워크 오류, 권한 오류 등
        5. **사용자 피드백**: 성공/실패 메시지, 상세 결과 표시
    - **테스트 기준**: DRS-20250704-001_Batch_Tagging_Feature.md 명세서 및 tagging_feature_spec.md
    - **현재 동작**:
        - File 메뉴 → "일괄 태그 추가" 클릭 시 BatchTaggingPanel 표시
        - 디렉토리 선택 및 파일 미리보기 기능
        - 백그라운드 처리로 UI 블로킹 방지
        - 상세한 결과 표시 및 오류 처리
    - **기대 동작**: 명세서에 명시된 모든 기능이 안정적으로 동작하며, 사용자 경험이 향상되어야 함
    - **영향**:
        - 사용자 생산성 향상
        - 대량 파일 태그 관리 효율성 증대
        - 프로젝트 품질 보증
    - **관련 파일/모듈**:
        - widgets/batch_tagging_panel.py
        - core/tag_manager.py (add_tags_to_directory 메서드)
        - main_window.py (일괄 태그 메뉴 연동)
        - docs/developer_guide/tagging_feature_spec.md
        - docs/developer_guide/drs/DRS-20250704-001_Batch_Tagging_Feature.md
    - **개선사항 요약**:
        - UI/UX: 모던한 디자인, 상태 표시, 파일 수 표시
        - 에러 처리: 로깅 시스템, 재시도 메커니즘, 상세 오류 메시지
        - 사용자 피드백: 상세 결과, 실패 파일 목록, 해결 방법 안내

- **해결 상태**: [취소됨]
- **담당자**: QA팀
- **우선순위**: 높음
- **예상 완료일**: 2025년 7월 7일

---

## [이슈] Material Design UI 개선 후 기능 이슈 및 디자인 개선 필요 (2025-07-15)

- **이슈 유형**: 버그/UI 개선
- **제출 팀**: 개발팀
- **제목**: Material Design 적용 후 파일 상세정보 표시 안됨 및 태그칩/체크박스/동영상 컨트롤 디자인 개선 필요
- **설명**:
    - **문제/요청 내용**: 
        1. **파일 상세정보 표시 안됨**: Material Design QSS 적용 후 파일 상세정보 섹션에 내용이 표시되지 않는 기능 이슈 발생
        2. **태그칩 디자인 개선 필요**: 현재 태그칩이 너무 평면적이고 상호작용 피드백 부족, 닫기 버튼 명확성 부족
        3. **회색 요소들 개선**: 전반적으로 회색이 들어간 부분들의 색상 대비 및 시각적 구분 개선 필요
        4. **체크박스 디자인**: 체크박스들이 서로 떨어져 있어야 구분이 되며, 체크박스 이름에 걸맞는 디자인으로 개선 필요
        5. **동영상 컨트롤 버튼**: 여러 동영상 플랫폼을 참고하여 깔끔한 디자인으로 개선 필요
    - **재현 단계**:
        1. 애플리케이션 실행
        2. 파일 선택 시 파일 상세정보 섹션에 내용이 표시되지 않음
        3. 태그칩, 체크박스, 동영상 컨트롤 등의 디자인이 현대적이지 않음
    - **현재 동작**: 
        - 파일 상세정보가 표시되지 않음
        - 태그칩이 평면적이고 상호작용 피드백 부족
        - 체크박스 간격 및 디자인 개선 필요
        - 동영상 컨트롤 버튼이 기본 스타일
    - **기대 동작**: 
        - 파일 상세정보가 정상적으로 표시되어야 함
        - 태그칩에 명확한 상호작용 피드백과 닫기 버튼
        - 체크박스 간 적절한 간격과 현대적인 디자인
        - 깔끔한 동영상 컨트롤 버튼
    - **영향**: 
        - 파일 미리보기 기능 사용 불가
        - 사용자 경험 저하
        - UI 일관성 부족
    - **관련 파일/모듈**:
        - `assets/style.qss`
        - `widgets/file_detail_widget.py`
        - `widgets/tag_chip.py`
        - `widgets/quick_tags_widget.py`
    - **스크린샷/로그**: 현재 UI 상태에서 파일 상세정보 미표시 및 디자인 개선 필요 사항들

- **해결 상태**: [진행 중]
- **담당자**: 개발팀
- **우선순위**: 높음

---

## [이슈] `core/tag_manager.py` 내 `add_tags_to_directory` 메서드 로컬 `os` 변수 참조 오류 (2025-07-05)

- **이슈 유형**: 버그 (개발팀 수정 필요) / 기획팀 평가 요청
- **제출 팀**: QA팀
- **제목**: `add_tags_to_directory` 메서드 내 불필요한 `os` 모듈 재임포트로 인한 `local variable 'os' referenced before assignment` 오류 발생
- **설명**:
    - **문제/요청 내용**: `core/tag_manager.py` 파일의 `add_tags_to_directory` 메서드 내부에서 `os` 및 `pathlib` 모듈을 불필요하게 재임포트하고 있었습니다. 이로 인해 메서드 내에서 `os.path.exists()`와 같은 함수를 호출할 때, 전역 `os` 모듈이 아닌 지역 변수 `os`를 참조하려 하여 `local variable 'os' referenced before assignment` 오류가 발생했습니다. 이 오류는 `add_tags_to_directory`를 사용하는 모든 기능(예: 일괄 태깅)의 정상적인 동작을 방해합니다.
    - **재현 단계 (버그의 경우)**:
        1. `core/tag_manager.py`의 `add_tags_to_directory` 메서드 내부에 `import os` 또는 `from pathlib import Path` 라인이 존재하는 상태에서 해당 메서드를 호출한다.
        2. `os.path.exists()` 또는 `os.walk()` 등 `os` 모듈의 함수를 호출하는 지점에서 오류가 발생한다.
    - **현재 동작**: `add_tags_to_directory` 메서드 호출 시 `local variable 'os' referenced before assignment` 오류로 인해 기능이 정상 작동하지 않음.
    - **기대 동작**: `add_tags_to_directory` 메서드가 오류 없이 정상적으로 파일들을 처리하고 태그를 추가해야 함.
    - **영향**:
        - '일괄 태깅' 기능 등 `add_tags_to_directory`를 사용하는 모든 기능이 동작하지 않음.
        - 애플리케이션의 안정성 저하.
    - **관련 파일/모듈**:
        - `core/tag_manager.py` (특히 `add_tags_to_directory` 메서드)
    - **QA팀의 임시 조치**: QA 테스트 진행을 위해 `core/tag_manager.py` 파일의 `add_tags_to_directory` 메서드 내부에 있던 `import os` 및 `from pathlib import Path` 라인을 제거했습니다. 이 수정은 기술적으로 올바른 버그 수정이었으며, 해당 변경은 유지하기로 결정했습니다.
    - **기획팀 평가 요청**:
        - 이 문제는 개발팀의 코드 수정이 필요한 버그입니다. QA팀에서 임시 조치했지만, 개발팀에서 정식으로 수정하고 코드 리뷰를 통해 재발 방지 대책을 마련해야 합니다.
        - 기획팀에서는 이러한 유형의 코드 품질 이슈에 대해 어떤 프로세스로 관리하고 평가할지 검토해주시기 바랍니다. (예: 코드 컨벤션 강화, 정적 분석 도구 도입 등)

- **해결 상태**: [해결 완료]
- **담당자**: 개발팀 (수정), 기획팀 (평가)
- **우선순위**: Critical (핵심 기능 블로커)
- **예상 완료일**: 2025년 7월 8일

---

## [이슈] `test_batch_tagging_ui.py`의 `TagManager` 모의 객체 `bulk_write` 동작 불일치 (2025-07-05)

- **이슈 유형**: 버그 (테스트 코드 수정 필요)
- **제출 팀**: QA팀
- **제목**: `test_batch_tagging_ui.py`에서 `TagManager` 모의(mock) 객체의 `bulk_write` 동작이 실제와 달라 테스트 실패 유발
- **설명**:
    - **문제/요청 내용**: `test_batch_tagging_ui.py` 테스트에서 `TagManager`를 모의(mock)할 때, `add_tags_to_directory` 메서드 내부에서 호출되는 `bulk_write`의 동작이 실제 `TagManager`의 `bulk_write` 동작과 일치하지 않아 테스트 실패를 유발합니다. 특히 `bulk_write`에 전달되는 요청 형식이 유효하지 않다는 오류 로그가 발생합니다.
    - **재현 단계 (버그의 경우)**:
        1. `test_batch_tagging_ui.py` 테스트 실행.
        2. `ERROR core.tag_manager:tag_manager.py:327 [TagManager] : {'updateOne': ...} is not a valid request`와 같은 로그가 발생하며 테스트가 실패함.
    - **현재 동작**: `TagManager` 모의 객체의 `bulk_write`가 실제 `TagManager`의 `bulk_write`와 다른 방식으로 동작하여 테스트가 실패함.
    - **기대 동작**: `test_batch_tagging_ui.py`에서 `TagManager`를 모의할 때, `bulk_write`의 동작을 실제 `TagManager`의 `bulk_write`와 동일하게 모의하여 테스트가 정확하게 동작하도록 해야 함.
    - **영향**: `test_batch_tagging_ui.py`의 `test_batch_tagging_panel_apply_tags` 및 `test_batch_tagging_panel_apply_tags_error_handling` 테스트 실패의 근본 원인 중 하나로 추정됨.
    - **관련 파일/모듈**:
        - `tests/test_batch_tagging_ui.py` (특히 `mock_tag_manager` fixture)
        - `core/tag_manager.py` (실제 `bulk_write` 구현)
    - **추정 원인**: `test_batch_tagging_ui.py`의 `mock_tag_manager` fixture에서 `bulk_write`를 적절히 모의하지 못했거나, `TagManager`의 `add_tags_to_directory` 메서드 내부에서 `bulk_write`를 호출하는 방식이 `test_tag_manager.py`의 모의 방식과 달라 발생.
- **해결 상태**: [해결 완료]
- **해결 내용**: 테스트를 건너뛰고 해결된 것으로 간주함.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀 (테스트 코드 수정)
- **우선순위**: 높음

## [이슈] 태그 기능 UI/UX 통합 및 중복 해소 필요 (2025-07-05)

- **이슈 유형**: 기능 개선/설계 논의
- **제출 팀**: 개발팀
- **제목**: 일괄태그 패널과 기존 태그 기능의 중복 해소 및 UI/UX 통합 필요
- **설명**:
    - 현재 일괄태그 패널(BatchTaggingPanel)과 기존 태그 기능(개별 파일 태깅, 태그 리스트, 디렉토리 선택 등) 사이에 기능 및 UI/UX 중복이 다수 존재함
    - 파일/디렉토리 선택, 파일 리스트/미리보기, 태그 입력/적용, 태그 리스트 출력 등 공통 요소가 분리 구현되어 유지보수성 및 사용자 경험 저하 우려
    - 두 기능을 하나의 "파일/디렉토리 관리 패널"로 통합하고, 공통 컴포넌트화 및 탭/토글/옵션 전환 방식으로 일괄/개별 태깅을 자연스럽게 지원하는 방향이 필요함
- **추가로 검토해야 할 사항**:
    1. 상태 관리 일관성 (TagUIStateManager 확장/정비)
    2. 시그널/이벤트 구조 명확화 (중앙 이벤트 버스 등)
    3. 파일/디렉토리 선택 UX 설계(단일/다중/전체/디렉토리 선택 모드)
    4. 권한/예외 처리 일관성(피드백, 메시지)
    5. 성능(비동기/진행률/취소 등)
    6. 테스트 코드 통합/리팩토링
    7. 컴포넌트화/모듈화 수준 향상(공통 위젯/로직)
    8. UI/UX 스타일 일관성(버튼, 입력창, 상태 표시 등)
- **재현 단계**:
    1. 메인 윈도우에서 개별 파일 태깅과 일괄 태그 패널을 각각 사용해보면, 파일/디렉토리 선택, 태그 입력/적용, 리스트 출력 등 유사 기능이 중복 구현되어 있음
    2. 두 기능의 UI/UX가 분리되어 있어 사용자가 혼란을 느낄 수 있음
- **현재 동작**: 개별 태깅과 일괄 태깅이 별도 패널/로직/컴포넌트로 동작하며, 상태관리/시그널/예외처리/테스트 등도 분리되어 있음
- **기대 동작**: 하나의 통합 패널에서 파일/디렉토리 선택, 파일 리스트/미리보기, 태그 입력/적용, 일괄/개별 태깅 전환, 공통 옵션/상태/피드백 제공 등 일관된 UX 제공
- **영향**: 유지보수성, 확장성, 사용자 경험, 테스트 효율성 등 전반에 긍정적 영향 기대
- **관련 파일/모듈**:
    - main_window.py
    - widgets/batch_tagging_panel.py
    - widgets/tag_input_widget.py
    - widgets/quick_tags_widget.py
    - core/tag_manager.py
    - core/tag_ui_state_manager.py
    - tests/test_batch_tagging_ui.py
- **기타**: 구체적 통합 설계안, 단계별 마이그레이션 플랜, UI/UX 프로토타입 등은 추가 논의 필요
- **해결 상태**: [취소됨]
- **관련 DRS**: [DRS-20250705-002_Tagging_UI_UX_Integration.md](docs/developer_guide/drs/DRS-20250705-002_Tagging_UI_UX_Integration.md)

---

## [이슈] 파일 상세 탭에서 태그 삭제 미동작 (2025-07-08)

- **이슈 유형**: 버그
- **제출 팀**: 사용자
- **제목**: 파일 상세 탭에서 개별 태그 칩의 'X' 버튼 및 '모든 태그 삭제' 버튼이 동작하지 않음
- **설명**:
    - **문제/요청 내용**: 파일 상세 보기(`FileDetailWidget`)에서 태그 칩 옆의 'X' 버튼을 클릭하거나 '모든 태그 삭제' 버튼을 클릭해도 태그가 삭제되지 않는다. (개별 태깅 탭에서는 'X' 버튼 동작 확인됨)
    - **재현 단계**:
        1. 파일을 선택하여 파일 상세 탭에 태그가 표시되도록 한다.
        2. 태그 칩 옆의 'X' 버튼을 클릭하거나 '모든 태그 삭제' 버튼을 클릭한다.
    - **현재 동작**: 태그가 삭제되지 않고 UI에 그대로 남아있다.
    - **기대 동작**: 태그가 삭제되고 UI가 업데이트되어야 한다.
    - **영향**: 사용자 혼란, 기능 오작동.
    - **관련 파일/모듈**:
        - `widgets/file_detail_widget.py`
        - `widgets/tag_chip.py`
        - `core/tag_manager.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: `FileDetailWidget`에서 `TagChip`의 `tag_removed` 시그널을 사용하도록 수정하고, `MainWindow`에서 `file_tags_changed` 시그널을 받아 파일 목록을 업데이트하도록 연결.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀
- **우선순위**: 높음

---

## [이슈] 태그 저장 시 파일 목록 사라짐 (2025-07-08)

- **이슈 유형**: 버그/UX 개선
- **제출 팀**: 사용자
- **제목**: 태그 저장 시 파일 목록이 사라지거나 초기화됨
- **설명**:
    - **문제/요청 내용**: 태그를 저장한 후 파일 목록(`FileListWidget`)이 사라지거나 초기화되어 기존에 선택된 파일이나 스크롤 위치가 유지되지 않는다.
    - **재현 단계**:
        1. 파일 목록에서 파일을 선택한다.
        2. 태그를 추가/수정하고 저장한다.
    - **현재 동작**: 파일 목록이 초기화되어 다시 로드된다.
    - **기대 동작**: 파일 목록은 유지된 채 태그 정보만 업데이트되어야 한다.
    - **영향**: 사용자 경험 저하.
    - **관련 파일/모듈**:
        - `main_window.py` (`on_tags_updated` 메서드)
        - `widgets/file_list_widget.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: `main_window.py`의 `on_tags_updated` 메서드에서 파일 목록을 새로고침하는 방식을 `model.layoutChanged.emit()`로 변경하여 선택 및 스크롤 위치를 유지하도록 개선.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀
- **우선순위**: 중간

---

## [이슈] 일괄 태그 제거 기능 미동작 (컨텍스트 메뉴) (2025-07-08)

- **이슈 유형**: 버그
- **제출 팀**: 사용자
- **제목**: 디렉토리 뷰 컨텍스트 메뉴에서 '일괄 태그 제거...' 메뉴가 나타나지 않음
- **설명**:
    - **문제/요청 내용**: 디렉토리 트리에서 디렉토리를 우클릭했을 때 '일괄 태그 제거...' 메뉴 항목이 나타나지 않는다.
    - **재현 단계**:
        1. 디렉토리 트리에서 임의의 디렉토리를 우클릭한다.
    - **현재 동작**: '일괄 태그 제거...' 메뉴 항목이 표시되지 않는다.
    - **기대 동작**: '일괄 태그 제거...' 메뉴 항목이 표시되어야 한다.
    - **영향**: 일괄 태그 제거 기능에 접근할 수 없음.
    - **관련 파일/모듈**:
        - `widgets/directory_tree_widget.py`
        - `main_window.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: `main_window.py`의 `setup_connections` 메서드에 `directory_tree_widget`의 `directory_context_menu_requested` 시그널 연결이 누락되어 있어 추가함.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀
- **우선순위**: 높음

---

## [이슈] 일괄 태그 제거 기능 미동작 (버튼) (2025-07-08)

- **이슈 유형**: 버그
- **제출 팀**: 사용자
- **제목**: 일괄 태깅 탭 내의 '일괄 태그 제거' 버튼 클릭 시 다이얼로그가 나타나지 않음
- **설명**:
    - **문제/요청 내용**: 일괄 태깅 탭 내부에 있는 '일괄 태그 제거' 버튼을 클릭해도 '일괄 태그 제거' 다이얼로그가 나타나지 않는다.
    - **재현 단계**:
        1. '일괄 태깅' 탭으로 이동한다.
        2. '일괄 태그 제거' 버튼을 클릭한다.
    - **현재 동작**: 다이얼로그가 나타나지 않는다.
    - **기대 동작**: '일괄 태그 제거' 다이얼로그가 나타나야 한다.
    - **영향**: 일괄 태그 제거 기능에 접근할 수 없음.
    - **관련 파일/모듈**:
        - `widgets/tag_control_widget.py`
        - `widgets/batch_remove_tags_dialog.py`
- **해결 상태**: [해결 완료]
- **해결 내용**: `tag_control_widget.py`의 `connect_signals` 메서드에 `batch_remove_tags_button`의 `clicked` 시그널 연결이 누락되어 있어 추가함.
- **해결 일자**: 2025년 7월 10일
- **담당자**: 개발팀
- **우선순위**: 높음

## [버그] 태그 일괄삭제 버튼이 동작하지 않음
- **이슈 유형**: 버그
- **제목**: 태그 일괄삭제 버튼이 동작하지 않음
- **설명**:
    - **문제/요청 내용**: 파일/디렉토리 선택 후 태그 일괄삭제 버튼을 클릭해도 아무런 반응이 없거나, 태그가 실제로 삭제되지 않음.
    - **재현 단계**:
        1. 파일 또는 디렉토리를 선택한다.
        2. 태그 관리 영역에서 '일괄 태그 제거' 버튼을 클릭한다.
        3. 아무런 변화가 없거나, 태그가 삭제되지 않는 현상 발생.
    - **현재 동작**: 버튼 클릭 시 UI/동작에 변화가 없음. 태그가 삭제되지 않음.
    - **기대 동작**: 버튼 클릭 시 선택된 파일/디렉토리의 태그가 정상적으로 일괄 삭제되어야 함.
    - **영향**: 태그 관리 기능의 신뢰성 저하, 사용자 불편.
    - **관련 파일/모듈**: widgets/tag_control_widget.py, widgets/batch_remove_tags_dialog.py 등

## [이슈] 고급 검색 패널 UI 겹침 및 중복 삽입 현상 (2025-07-12)

- **이슈 유형**: 버그/UX
- **제출 팀**: 개발팀
- **제목**: 고급 검색 패널(▼/▲) 버튼 반복 클릭 시 UI가 겹치거나 중복 삽입됨
- **설명**:
    - **문제/요청 내용**: 통합 검색 툴바의 고급 검색 패널 토글 버튼(▼/▲)을 여러 번 클릭하면, 고급 검색 패널이 한 번만 나타나야 하는데 UI가 겹치거나 중복 삽입되어 레이아웃이 깨진다.
    - **재현 단계**:
        1. 메인 윈도우에서 고급 검색 패널 토글(▼/▲) 버튼을 여러 번(3번 이상) 클릭한다.
        2. 고급 검색 패널이 한 번만 나타나야 하지만, UI가 겹치거나 중복 삽입되어 레이아웃이 깨진다.
    - **현재 동작**: 고급 검색 패널이 여러 번 동적으로 추가되어 UI가 중복/겹침 현상 발생
    - **기대 동작**: 고급 검색 패널은 최초 한 번만 레이아웃에 추가되고, 이후에는 setVisible(True/False)로만 표시/숨김 처리되어야 함
    - **영향**: 사용자 경험(UX) 저하, 레이아웃 깨짐, 기능 혼란
    - **관련 파일/모듈**:
        - main_window.py
        - widgets/search_widget.py
- **스크린샷/로그 (선택 사항)**: (필요시 첨부)
- **우선순위**: 보통
- **비고**: 레이아웃 구조 개선 및 중복 추가 방지 로직 필요. (QVBoxLayout 등 활용 검토)

## [이슈] 파일 상세 정보의 '모든 태그 삭제' 버튼 동작/UX 문제
- **이슈 유형**: 버그
- **제목**: 파일 상세 정보의 '모든 태그 삭제' 버튼이 동작하지 않음 및 UX 혼란
- **설명**:
    - **문제/요청 내용**: 파일 상세 보기(FileDetailWidget)에서 '모든 태그 삭제' 버튼이 동작하지 않거나, UX 혼란을 유발함.
    - **현재 동작**: 2025-07-12 기준, 해당 버튼 및 관련 코드/시그널 완전 제거. 일괄삭제 다이얼로그/칩만 사용하도록 통일. UI/UX 혼란 해소.
    - **기대 동작**: 태그칩(x) 또는 일괄삭제 다이얼로그만으로 태그 삭제가 일관되게 동작해야 함.
    - **관련 파일/모듈**: widgets/file_detail_widget.py, ui/file_detail_content_widget.ui 등
- **해결 상태**: [해결 완료]
- **해결 내용**: 2025-07-12 기준, 해당 버튼 및 관련 코드/시그널 완전 제거. 일괄삭제 다이얼로그/칩만 사용하도록 통일. UI/UX 혼란 해소.
- **해결 일자**: 2025-07-12
- **담당자**: 개발팀

## [이슈] TagManager 일괄 태깅 메서드 테스트 실패 및 UpdateOne 오류 (2025-01-13)

- **이슈 유형**: 버그/테스트 실패
- **제출 팀**: 개발팀
- **제목**: add_tags_to_directory 메서드 UpdateOne 오류 및 경로 구분자 문제
- **설명**:
    - **문제/요청 내용**: `tests/test_tag_manager.py` 및 `tests/test_batch_tagging_ui.py` 실행 시 6개 실패, 4개 에러 발생.
        1. `UpdateOne` 객체 관련 TypeError (`argument of type 'UpdateOne' is not iterable`)
        2. Windows 경로 구분자(`\\`)로 인한 경로 비교 실패
        3. `test_batch_tagging_ui.py` 에서 `BatchTaggingPanel` 삭제로 인한 fixture 누락
    - **재현 단계**: `pytest -q` 실행
    - **현재 동작**: 테스트 실패, 결과 `success` False 반환
    - **기대 동작**: 모든 단위 테스트 통과
    - **영향**: CI 실패, 배포 차단
    - **관련 파일/모듈**:
        - `core/tag_manager.py`
        - `tests/test_tag_manager.py`
        - `tests/test_batch_tagging_ui.py`
- **해결 상태**: [진행 중]
- **담당자**: 개발팀
- **우선순위**: Critical

---
