---
status: Approved
---
# 기능 명세 (Feature Specification)

*   **문서 ID**: `FS-20250711-006`
*   **작성일**: `2025년 07월 14일`
*   **작성자**: `Gemini (PM)`
*   **기능명**: `전역 파일 검색`

---

### 1. 개요 (Overview)

이 기능은 사용자가 FileTagger 애플리케이션에서 설정된 작업 공간 전체에서 파일명을 기반으로 파일을 검색할 수 있도록 합니다. 디렉토리 트리 위젯의 전역 파일 검색 입력란을 통해 실시간으로 검색을 수행하며, 검색 결과를 파일 목록에 표시하여 사용자가 원하는 파일을 빠르게 찾을 수 있도록 지원합니다.

### 2. 주요 기능 상세 (Detailed Functional Description)

*   **2.1. 기능 설명**:
    *   **전역 검색**: 설정된 작업 공간의 모든 하위 디렉토리를 포함하여 파일명을 기반으로 검색을 수행합니다.
    *   **실시간 검색**: 사용자가 검색어를 입력하는 즉시 검색이 실행되어 결과를 실시간으로 업데이트합니다.
    *   **대소문자 무시**: 검색 시 파일명의 대소문자를 구분하지 않아 사용자 편의성을 높입니다.
    *   **부분 일치**: 파일명에 검색어가 포함된 모든 파일을 찾아 결과에 포함합니다.
    *   **검색 결과 표시**: 검색된 파일들을 파일 목록에 표시하고, 검색 결과 수를 상태바에 표시합니다.
    *   **검색 초기화**: 검색어를 지우면 원래의 디렉토리 뷰로 돌아갑니다.

*   **2.2. 입력/출력**:
    *   **입력**:
        *   사용자가 입력한 검색어 (문자열)
        *   현재 설정된 작업 공간 경로
    *   **출력**:
        *   검색 결과 파일 목록
        *   검색 결과 수
        *   상태바 메시지 (검색 진행 상황 및 결과)
        *   업데이트된 파일 목록 UI

*   **2.3. 정상 흐름**:
    1.  사용자가 `DirectoryTreeWidget`의 전역 파일 검색 입력란에 검색어를 입력합니다.
    2.  `DirectoryTreeWidget.global_file_search_requested` 시그널이 방출되어 검색어가 `MainWindow`로 전달됩니다.
    3.  `MainWindow.on_global_file_search_requested()` 메서드가 호출되어 검색을 처리합니다.
    4.  **검색어가 비어있는 경우**:
        *   현재 작업 공간 경로로 `FileListWidget.set_path()`를 호출하여 원래 뷰로 복원합니다.
        *   `FileDetailWidget.clear_preview()`를 호출하여 파일 상세 정보를 초기화합니다.
        *   `TagControlWidget.clear_view()`를 호출하여 태그 제어 위젯을 초기화합니다.
        *   상태바에 "전역 검색이 초기화되었습니다." 메시지를 표시합니다.
    5.  **검색어가 있는 경우**:
        *   상태바에 "검색 중..." 메시지를 표시합니다.
        *   `os.walk()`를 사용하여 작업 공간 전체를 재귀적으로 탐색합니다.
        *   각 파일의 이름에 검색어가 포함되어 있는지 확인합니다 (대소문자 무시).
        *   일치하는 파일들의 전체 경로를 `search_results` 리스트에 수집합니다.
        *   `FileListWidget.set_search_results()`를 호출하여 검색 결과를 파일 목록에 표시합니다.
        *   `FileDetailWidget.clear_preview()`를 호출하여 파일 상세 정보를 초기화합니다.
        *   `TagControlWidget.clear_view()`를 호출하여 태그 제어 위젯을 초기화합니다.
        *   상태바에 검색 완료 메시지와 결과 수를 표시합니다.

*   **2.4. 예외 처리**:
    *   **작업 공간 접근 오류**: 작업 공간 디렉토리에 접근할 수 없는 경우 오류 메시지를 표시하고 검색을 중단합니다.
    *   **권한 부족**: 특정 디렉토리에 접근 권한이 없는 경우 해당 디렉토리는 검색에서 제외하고 계속 진행합니다.
    *   **메모리 부족**: 대용량 작업 공간에서 검색 시 메모리 부족이 발생할 경우 검색을 중단하고 경고 메시지를 표시합니다.
    *   **검색 시간 초과**: 검색이 너무 오래 걸리는 경우 진행 상황을 표시하고 필요시 검색을 중단할 수 있도록 합니다.

### 3. UI/UX 요소 (UI/UX Elements)

*   **DirectoryTreeWidget**:
    *   **전역 파일 검색 입력란**: `QLineEdit` 위젯으로, "전역 파일 검색..." 플레이스홀더 텍스트를 포함
    *   **실시간 검색**: `textChanged` 시그널을 통해 입력 즉시 검색 실행
*   **FileListWidget**:
    *   **검색 결과 표시**: 검색 모드에서 검색된 파일들을 테이블 형태로 표시
    *   **검색 결과 선택**: 검색 결과에서 파일을 선택하여 상세 정보 확인 가능
*   **상태바**:
    *   **검색 진행 메시지**: "검색 중..." 메시지로 검색 진행 상황 표시
    *   **검색 완료 메시지**: "검색 완료: X개 파일 발견" 형태로 결과 요약 표시
    *   **검색 초기화 메시지**: "전역 검색이 초기화되었습니다." 메시지로 초기화 완료 표시

### 4. 기술적 구현 (Technical Implementation)

*   **DirectoryTreeWidget**:
    *   `global_file_search_input`: 전역 파일 검색을 위한 `QLineEdit` 위젯
    *   `global_file_search_requested`: 검색 요청 시그널 (`pyqtSignal(str)`)
    *   `textChanged` 시그널 연결: 입력 텍스트 변경 시 즉시 검색 요청
*   **MainWindow**:
    *   `on_global_file_search_requested(search_text)`: 전역 파일 검색 요청을 처리하는 메서드
    *   `os.walk()`: 작업 공간 전체를 재귀적으로 탐색하는 Python 표준 라이브러리 함수
    *   `str.lower()`: 대소문자 무시 검색을 위한 문자열 소문자 변환
    *   `in` 연산자: 부분 일치 검색을 위한 문자열 포함 여부 확인
*   **FileListWidget**:
    *   `set_search_results(file_paths)`: 검색 결과를 파일 목록에 표시하는 메서드
    *   `FileTableModel.set_search_results()`: 테이블 모델에서 검색 모드로 전환
*   **Config**:
    *   `DEFAULT_WORKSPACE_PATH`: 검색 범위를 결정하는 작업 공간 경로

### 5. 테스트 케이스 (Test Cases)

*   **TC-FS-048**: 검색어 입력 시 실시간으로 검색이 실행되는지 확인
*   **TC-FS-049**: 검색어가 비어있을 때 원래 디렉토리 뷰로 복원되는지 확인
*   **TC-FS-050**: 대소문자를 구분하지 않고 검색이 동작하는지 확인
*   **TC-FS-051**: 부분 일치 검색이 올바르게 동작하는지 확인
*   **TC-FS-052**: 검색 결과가 파일 목록에 올바르게 표시되는지 확인
*   **TC-FS-053**: 검색 결과에서 파일을 선택할 수 있는지 확인
*   **TC-FS-054**: 검색 결과 수가 상태바에 올바르게 표시되는지 확인
*   **TC-FS-055**: 대용량 작업 공간에서 검색 성능이 적절한지 확인
*   **TC-FS-056**: 접근 권한이 없는 디렉토리가 검색에서 제외되는지 확인
*   **TC-FS-057**: 검색 중 오류가 발생할 때 적절한 오류 메시지가 표시되는지 확인
*   **TC-FS-058**: 검색 결과가 없을 때 적절한 메시지가 표시되는지 확인

### 6. 관련 파일/모듈 (Related Files/Modules)

*   `main_window.py`: 메인 UI 및 전역 검색 요청 처리
*   `widgets/directory_tree_widget.py`: 전역 파일 검색 입력란 및 시그널 정의
*   `widgets/file_list_widget.py`: 검색 결과 표시 및 파일 목록 관리
*   `config.py`: 작업 공간 경로 설정
*   `ui/main_window.ui`: 메인 윈도우 UI 레이아웃 정의

--- 